<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Def_Agendamento" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:collaboration id="Collab_Agen">
    <bpmn:participant id="Part_UC02" name="UC02: Agendar Consulta" processRef="Process_UC02" />
    <bpmn:participant id="Part_UC03" name="UC03: Solicitar Encaixe" processRef="Process_UC03" />
    <bpmn:participant id="Part_UC04" name="UC04: Bloqueio de Agenda" processRef="Process_UC04" />
    <bpmn:participant id="Part_UC09" name="UC09: Cancelar Agendamento" processRef="Process_UC09" />
  </bpmn:collaboration>

  <bpmn:process id="Process_UC02" isExecutable="false">
    <bpmn:laneSet><bpmn:lane id="L_Sec_02" name="Secretária"><bpmn:flowNodeRef>Start_02</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_SelData</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_SelPac</bpmn:flowNodeRef><bpmn:flowNodeRef>End_02_OK</bpmn:flowNodeRef></bpmn:lane><bpmn:lane id="L_Sys_02" name="Sistema"><bpmn:flowNodeRef>Serv_Check</bpmn:flowNodeRef><bpmn:flowNodeRef>Gate_Disp</bpmn:flowNodeRef><bpmn:flowNodeRef>Serv_Save</bpmn:flowNodeRef><bpmn:flowNodeRef>End_02_Fail</bpmn:flowNodeRef></bpmn:lane></bpmn:laneSet>
    <bpmn:startEvent id="Start_02" name="Início" /><bpmn:sequenceFlow id="F_02_1" sourceRef="Start_02" targetRef="Task_SelData" />
    <bpmn:userTask id="Task_SelData" name="Selecionar Data" /><bpmn:sequenceFlow id="F_02_2" sourceRef="Task_SelData" targetRef="Serv_Check" />
    <bpmn:serviceTask id="Serv_Check" name="Checar Disp" /><bpmn:sequenceFlow id="F_02_3" sourceRef="Serv_Check" targetRef="Gate_Disp" />
    <bpmn:exclusiveGateway id="Gate_Disp" name="Livre?" /><bpmn:sequenceFlow id="F_02_Y" name="Sim" sourceRef="Gate_Disp" targetRef="Task_SelPac" /><bpmn:sequenceFlow id="F_02_N" name="Não" sourceRef="Gate_Disp" targetRef="End_02_Fail" />
    <bpmn:userTask id="Task_SelPac" name="Selecionar Paciente" /><bpmn:sequenceFlow id="F_02_4" sourceRef="Task_SelPac" targetRef="Serv_Save" />
    <bpmn:serviceTask id="Serv_Save" name="Salvar" /><bpmn:sequenceFlow id="F_02_5" sourceRef="Serv_Save" targetRef="End_02_OK" />
    <bpmn:endEvent id="End_02_OK" name="Fim" /><bpmn:endEvent id="End_02_Fail" name="Ocupado" />
  </bpmn:process>

  <bpmn:process id="Process_UC03" isExecutable="false">
    <bpmn:laneSet><bpmn:lane id="L_Med_03" name="Médico"><bpmn:flowNodeRef>Start_03</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_Justify</bpmn:flowNodeRef><bpmn:flowNodeRef>End_03_OK</bpmn:flowNodeRef></bpmn:lane><bpmn:lane id="L_Sys_03" name="Sistema"><bpmn:flowNodeRef>Serv_Perm</bpmn:flowNodeRef><bpmn:flowNodeRef>Gate_Perm</bpmn:flowNodeRef><bpmn:flowNodeRef>Serv_SaveEnc</bpmn:flowNodeRef><bpmn:flowNodeRef>End_03_No</bpmn:flowNodeRef></bpmn:lane></bpmn:laneSet>
    <bpmn:startEvent id="Start_03" name="Encaixe" /><bpmn:sequenceFlow id="F_03_1" sourceRef="Start_03" targetRef="Task_Justify" />
    <bpmn:userTask id="Task_Justify" name="Justificar" /><bpmn:sequenceFlow id="F_03_2" sourceRef="Task_Justify" targetRef="Serv_Perm" />
    <bpmn:serviceTask id="Serv_Perm" name="Verificar Permissão" /><bpmn:sequenceFlow id="F_03_3" sourceRef="Serv_Perm" targetRef="Gate_Perm" />
    <bpmn:exclusiveGateway id="Gate_Perm" name="OK?" /><bpmn:sequenceFlow id="F_03_Y" sourceRef="Gate_Perm" targetRef="Serv_SaveEnc" /><bpmn:sequenceFlow id="F_03_N" sourceRef="Gate_Perm" targetRef="End_03_No" />
    <bpmn:serviceTask id="Serv_SaveEnc" name="Salvar Encaixe" /><bpmn:sequenceFlow id="F_03_4" sourceRef="Serv_SaveEnc" targetRef="End_03_OK" />
    <bpmn:endEvent id="End_03_OK" name="Feito" /><bpmn:endEvent id="End_03_No" name="Negado" />
  </bpmn:process>

  <bpmn:process id="Process_UC04" isExecutable="false">
    <bpmn:laneSet><bpmn:lane id="L_User_04" name="Gestor"><bpmn:flowNodeRef>Start_04</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_Block</bpmn:flowNodeRef></bpmn:lane><bpmn:lane id="L_Sys_04" name="Sistema"><bpmn:flowNodeRef>Serv_Conflict</bpmn:flowNodeRef><bpmn:flowNodeRef>Gate_Con</bpmn:flowNodeRef><bpmn:flowNodeRef>Serv_DoBlock</bpmn:flowNodeRef><bpmn:flowNodeRef>End_04_OK</bpmn:flowNodeRef><bpmn:flowNodeRef>End_04_Fail</bpmn:flowNodeRef></bpmn:lane></bpmn:laneSet>
    <bpmn:startEvent id="Start_04" name="Bloqueio" /><bpmn:sequenceFlow id="F_04_1" sourceRef="Start_04" targetRef="Task_Block" />
    <bpmn:userTask id="Task_Block" name="Definir Periodo" /><bpmn:sequenceFlow id="F_04_2" sourceRef="Task_Block" targetRef="Serv_Conflict" />
    <bpmn:serviceTask id="Serv_Conflict" name="Checar Conflitos" /><bpmn:sequenceFlow id="F_04_3" sourceRef="Serv_Conflict" targetRef="Gate_Con" />
    <bpmn:exclusiveGateway id="Gate_Con" name="Limpo?" /><bpmn:sequenceFlow id="F_04_Y" sourceRef="Gate_Con" targetRef="Serv_DoBlock" /><bpmn:sequenceFlow id="F_04_N" sourceRef="Gate_Con" targetRef="End_04_Fail" />
    <bpmn:serviceTask id="Serv_DoBlock" name="Salvar Bloqueio" /><bpmn:sequenceFlow id="F_04_4" sourceRef="Serv_DoBlock" targetRef="End_04_OK" />
    <bpmn:endEvent id="End_04_OK" name="Bloqueado" /><bpmn:endEvent id="End_04_Fail" name="Erro" />
  </bpmn:process>

  <bpmn:process id="Process_UC09" isExecutable="false">
    <bpmn:laneSet><bpmn:lane id="L_U_09" name="Usuário"><bpmn:flowNodeRef>Start_09</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_Cancel</bpmn:flowNodeRef><bpmn:flowNodeRef>End_09</bpmn:flowNodeRef></bpmn:lane><bpmn:lane id="L_S_09" name="Sistema"><bpmn:flowNodeRef>Serv_Upd</bpmn:flowNodeRef></bpmn:lane></bpmn:laneSet>
    <bpmn:startEvent id="Start_09" name="Cancelar" /><bpmn:sequenceFlow id="F_09_1" sourceRef="Start_09" targetRef="Task_Cancel" />
    <bpmn:userTask id="Task_Cancel" name="Confirmar" /><bpmn:sequenceFlow id="F_09_2" sourceRef="Task_Cancel" targetRef="Serv_Upd" />
    <bpmn:serviceTask id="Serv_Upd" name="Atualizar Status" /><bpmn:sequenceFlow id="F_09_3" sourceRef="Serv_Upd" targetRef="End_09" />
    <bpmn:endEvent id="End_09" name="Fim" />
  </bpmn:process>

  <bpmndi:BPMNDiagram id="Diagram_Agen">
    <bpmndi:BPMNPlane id="Plane_Agen" bpmnElement="Collab_Agen">
      <bpmndi:BPMNShape id="Part_02_di" bpmnElement="Part_UC02" isHorizontal="true"><dc:Bounds x="150" y="50" width="800" height="250" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_Sec_02_di" bpmnElement="L_Sec_02" isHorizontal="true"><dc:Bounds x="180" y="50" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_Sys_02_di" bpmnElement="L_Sys_02" isHorizontal="true"><dc:Bounds x="180" y="175" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Start_02_di" bpmnElement="Start_02"><dc:Bounds x="230" y="90" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SelData_di" bpmnElement="Task_SelData"><dc:Bounds x="300" y="68" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Serv_Check_di" bpmnElement="Serv_Check"><dc:Bounds x="300" y="200" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gate_Disp_di" bpmnElement="Gate_Disp"><dc:Bounds x="450" y="215" width="50" height="50" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_02_Fail_di" bpmnElement="End_02_Fail"><dc:Bounds x="457" y="270" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SelPac_di" bpmnElement="Task_SelPac"><dc:Bounds x="550" y="68" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Serv_Save_di" bpmnElement="Serv_Save"><dc:Bounds x="700" y="200" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_02_OK_di" bpmnElement="End_02_OK"><dc:Bounds x="850" y="90" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="F_02_1_di" bpmnElement="F_02_1"><di:waypoint x="266" y="108" /><di:waypoint x="300" y="108" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_02_2_di" bpmnElement="F_02_2"><di:waypoint x="350" y="148" /><di:waypoint x="350" y="200" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_02_3_di" bpmnElement="F_02_3"><di:waypoint x="400" y="240" /><di:waypoint x="450" y="240" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_02_N_di" bpmnElement="F_02_N"><di:waypoint x="475" y="265" /><di:waypoint x="475" y="270" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_02_Y_di" bpmnElement="F_02_Y"><di:waypoint x="500" y="240" /><di:waypoint x="525" y="240" /><di:waypoint x="525" y="108" /><di:waypoint x="550" y="108" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_02_4_di" bpmnElement="F_02_4"><di:waypoint x="650" y="108" /><di:waypoint x="675" y="108" /><di:waypoint x="675" y="240" /><di:waypoint x="700" y="240" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_02_5_di" bpmnElement="F_02_5"><di:waypoint x="800" y="240" /><di:waypoint x="825" y="240" /><di:waypoint x="825" y="108" /><di:waypoint x="850" y="108" /></bpmndi:BPMNEdge>

      <bpmndi:BPMNShape id="Part_03_di" bpmnElement="Part_UC03" isHorizontal="true"><dc:Bounds x="150" y="320" width="800" height="250" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_Med_03_di" bpmnElement="L_Med_03" isHorizontal="true"><dc:Bounds x="180" y="320" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_Sys_03_di" bpmnElement="L_Sys_03" isHorizontal="true"><dc:Bounds x="180" y="445" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Start_03_di" bpmnElement="Start_03"><dc:Bounds x="230" y="360" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Justify_di" bpmnElement="Task_Justify"><dc:Bounds x="300" y="338" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Serv_Perm_di" bpmnElement="Serv_Perm"><dc:Bounds x="300" y="470" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gate_Perm_di" bpmnElement="Gate_Perm"><dc:Bounds x="450" y="485" width="50" height="50" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_03_No_di" bpmnElement="End_03_No"><dc:Bounds x="457" y="540" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Serv_SaveEnc_di" bpmnElement="Serv_SaveEnc"><dc:Bounds x="550" y="470" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_03_OK_di" bpmnElement="End_03_OK"><dc:Bounds x="700" y="360" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="F_03_1_di" bpmnElement="F_03_1"><di:waypoint x="266" y="378" /><di:waypoint x="300" y="378" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_03_2_di" bpmnElement="F_03_2"><di:waypoint x="350" y="418" /><di:waypoint x="350" y="470" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_03_3_di" bpmnElement="F_03_3"><di:waypoint x="400" y="510" /><di:waypoint x="450" y="510" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_03_Y_di" bpmnElement="F_03_Y"><di:waypoint x="500" y="510" /><di:waypoint x="550" y="510" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_03_4_di" bpmnElement="F_03_4"><di:waypoint x="650" y="510" /><di:waypoint x="675" y="510" /><di:waypoint x="675" y="378" /><di:waypoint x="700" y="378" /></bpmndi:BPMNEdge>

      <bpmndi:BPMNShape id="Part_04_di" bpmnElement="Part_UC04" isHorizontal="true"><dc:Bounds x="150" y="590" width="800" height="250" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_U_04_di" bpmnElement="L_User_04" isHorizontal="true"><dc:Bounds x="180" y="590" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_S_04_di" bpmnElement="L_Sys_04" isHorizontal="true"><dc:Bounds x="180" y="715" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Start_04_di" bpmnElement="Start_04"><dc:Bounds x="230" y="630" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Block_di" bpmnElement="Task_Block"><dc:Bounds x="300" y="608" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Serv_Conflict_di" bpmnElement="Serv_Conflict"><dc:Bounds x="300" y="740" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gate_Con_di" bpmnElement="Gate_Con"><dc:Bounds x="450" y="755" width="50" height="50" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Serv_DoBlock_di" bpmnElement="Serv_DoBlock"><dc:Bounds x="550" y="740" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_04_OK_di" bpmnElement="End_04_OK"><dc:Bounds x="700" y="762" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_04_Fail_di" bpmnElement="End_04_Fail"><dc:Bounds x="457" y="810" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="F_04_1_di" bpmnElement="F_04_1"><di:waypoint x="266" y="648" /><di:waypoint x="300" y="648" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_04_2_di" bpmnElement="F_04_2"><di:waypoint x="350" y="688" /><di:waypoint x="350" y="740" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_04_3_di" bpmnElement="F_04_3"><di:waypoint x="400" y="780" /><di:waypoint x="450" y="780" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_04_Y_di" bpmnElement="F_04_Y"><di:waypoint x="500" y="780" /><di:waypoint x="550" y="780" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_04_4_di" bpmnElement="F_04_4"><di:waypoint x="650" y="780" /><di:waypoint x="700" y="780" /></bpmndi:BPMNEdge>

      <bpmndi:BPMNShape id="Part_09_di" bpmnElement="Part_UC09" isHorizontal="true"><dc:Bounds x="150" y="860" width="800" height="250" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_U_09_di" bpmnElement="L_U_09" isHorizontal="true"><dc:Bounds x="180" y="860" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="L_S_09_di" bpmnElement="L_S_09" isHorizontal="true"><dc:Bounds x="180" y="985" width="770" height="125" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Start_09_di" bpmnElement="Start_09"><dc:Bounds x="230" y="900" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Cancel_di" bpmnElement="Task_Cancel"><dc:Bounds x="300" y="878" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Serv_Upd_di" bpmnElement="Serv_Upd"><dc:Bounds x="450" y="1010" width="100" height="80" /></bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="End_09_di" bpmnElement="End_09"><dc:Bounds x="600" y="900" width="36" height="36" /></bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="F_09_1_di" bpmnElement="F_09_1"><di:waypoint x="266" y="918" /><di:waypoint x="300" y="918" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_09_2_di" bpmnElement="F_09_2"><di:waypoint x="400" y="918" /><di:waypoint x="425" y="918" /><di:waypoint x="425" y="1050" /><di:waypoint x="450" y="1050" /></bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="F_09_3_di" bpmnElement="F_09_3"><di:waypoint x="550" y="1050" /><di:waypoint x="575" y="1050" /><di:waypoint x="575" y="918" /><di:waypoint x="600" y="918" /></bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>