# 3.7. Modelagem de Classes de Projeto

> **‚ö†Ô∏è NOTA T√âCNICA - Discrep√¢ncia 1.1 Resolvida:**
> 
> **Discrep√¢ncia Identificada:** A documenta√ß√£o anterior mostrava `Medico extends Usuario`, mas a implementa√ß√£o real no backend possui `Medico extends Pessoa` e `Usuario extends Pessoa` como classes independentes.
> 
> **An√°lise de Impactos:**
> - Mudan√ßa para `Medico extends Usuario` teria **ALTO IMPACTO**
> - Requereria refatora√ß√£o completa: repositories, services, DTOs, controllers, testes
> - Altera√ß√£o no modelo de dados PostgreSQL (heran√ßa de tabelas)
> - Todo M√©dico precisaria obrigatoriamente de login/senha
> - Risco de quebra de integra√ß√£o com m√≥dulo de Agendamento
> 
> **Decis√£o:** Manter arquitetura atual do backend (Medico e Usuario s√£o classes irm√£s, ambas herdando de Pessoa). Documenta√ß√£o corrigida para refletir implementa√ß√£o real.
> 
> Data da corre√ß√£o: 14/12/2025

> **‚ö†Ô∏è NOTA T√âCNICA - Discrep√¢ncia 1.4 Resolvida:**
> 
> **Discrep√¢ncia Identificada:** A documenta√ß√£o mostrava atributos simplificados da classe `Agendamento`, mas a implementa√ß√£o possui atributos mais completos e robustos.
> 
> **Implementa√ß√£o Real (Mais Completa):**
> - Timestamps detalhados: agendamento, previs√£o e execu√ß√£o real
> - Rastreabilidade completa: usu√°rios que criaram, cancelaram, iniciaram e finalizaram
> - Melhor controle de ciclo de vida do agendamento
> 
> **Decis√£o:** Atualizar documenta√ß√£o para refletir implementa√ß√£o real, que √© **superior** ao planejamento inicial.
> 
> Data da corre√ß√£o: 14/12/2025

> **‚ö†Ô∏è NOTA T√âCNICA - Discrep√¢ncia 1.7 Resolvida:**
> 
> **Discrep√¢ncia Identificada:** A documenta√ß√£o mostrava relacionamento `Item "*" --> "1" Estoque`, mas a implementa√ß√£o Cassandra **N√ÉO possui este relacionamento**.
> 
> **An√°lise de Impacto:**
> - **Cassandra √© NoSQL:** N√£o suporta joins nativos, relacionamentos complexos n√£o s√£o recomendados
> - **MVP opera com estoque √∫nico:** Todos os casos de uso funcionam sem estoqueId
> - **Custo de implementa√ß√£o:** ALTO (80-100 horas) - refatora√ß√£o completa
> - **Benef√≠cio para MVP:** ZERO - nenhum caso de uso requer m√∫ltiplos estoques
> 
> **Decis√£o de Design NoSQL:**
> - ‚ùå Relacionamento removido da documenta√ß√£o
> - ‚úÖ Sistema opera com estoque √∫nico impl√≠cito (adequado para MVP)
> - ‚ö†Ô∏è Poss√≠vel expans√£o futura se necess√°rio
> 
> Data da corre√ß√£o: 14/12/2025

## Sum√°rio

- [3.7. Modelagem de Classes de Projeto](#37-modelagem-de-classes-de-projeto)
  - [Notas T√©cnicas - Corre√ß√µes de Discrep√¢ncias](#notas-t√©cnicas---corre√ß√µes-de-discrep√¢ncias)
  - [Sum√°rio](#sum√°rio)
  - [1. M√≥dulo de Agendamento](#1-m√≥dulo-de-agendamento)
    - [1.1. Diagrama de Classes - Agendamento](#11-diagrama-de-classes---agendamento)
    - [1.2. C√≥digo UML](#12-c√≥digo-uml)
  - [2. M√≥dulo de Cadastro](#2-m√≥dulo-de-cadastro)
    - [2.1. Diagrama de Classes - Cadastro](#21-diagrama-de-classes---cadastro)
    - [2.2. C√≥digo UML](#22-c√≥digo-uml)
  - [3. M√≥dulo de Estoque](#3-m√≥dulo-de-estoque)
    - [3.1. Diagrama de Classes - Estoque](#31-diagrama-de-classes---estoque)
    - [3.2. C√≥digo UML](#32-c√≥digo-uml)

---

## Notas T√©cnicas - Corre√ß√µes de Discrep√¢ncias

Este documento possui notas t√©cnicas detalhadas inline no in√≠cio (antes deste sum√°rio). As corre√ß√µes principais s√£o:

### Discrep√¢ncia 1.1: Hierarquia M√©dico vs Usuario
[üìÑ CORRECAO_DISCREPANCIA_1.1.md](../../../Corre√ß√µes%20de%20Alinhamento/CORRECAO_DISCREPANCIA_1.1.md)

### Discrep√¢ncia 1.4: Atributos de Agendamento Divergentes
[üìÑ CORRECAO_DISCREPANCIA_1.4.md](../../../Corre√ß√µes%20de%20Alinhamento/CORRECAO_DISCREPANCIA_1.4.md)

### Discrep√¢ncia 1.7: Relacionamento Item ‚Üî Estoque Faltante
[üìÑ CORRECAO_DISCREPANCIA_1.7.md](../../../Corre√ß√µes%20de%20Alinhamento/CORRECAO_DISCREPANCIA_1.7.md)

### Discrep√¢ncia 4.3: Usuario ‚Üî PerfilUsuario (Enum Incompleto)
[üìÑ CORRECAO_DISCREPANCIA_4.3.md](../../../Corre√ß√µes%20de%20Alinhamento/CORRECAO_DISCREPANCIA_4.3.md)

Para consultar todas as corre√ß√µes, acesse o [üìë Sum√°rio de Corre√ß√µes](../../../Corre√ß√µes%20de%20Alinhamento/SUMARIO_CORRECAO_DISCREPANCIA.md).

---

## 1. M√≥dulo de Agendamento

### 1.1. Diagrama de Classes - Agendamento

![image_page1_1.png](images/image_page1_1.png)

### 1.2. C√≥digo UML

```plantuml
@startuml Diagrama de Classes - Microsservi√ßo Agendamentotitle Diagrama de Classes - SimpleHealth Agendamento (MongoDB) 
 
' Configura√ß√µes de estilo 
skinparam classAttributeIconSize 0 
skinparam class { 
    BackgroundColor<<abstract>> LightYellow 
    BorderColor Black 
    ArrowColor Black 
} 
 
' Classe abstrata Agendamento 
abstract class Agendamento <<abstract>> { 
    - id: String {PK}
    - dataHoraAgendamento: LocalDateTime
    - dataHoraInicioPrevista: LocalDateTime 
    - dataHoraFimPrevista: LocalDateTime 
    - dataHoraInicioExecucao: LocalDateTime
    - dataHoraFimExecucao: LocalDateTime
    - isEncaixe: Boolean 
    - modalidade: ModalidadeEnum 
    - motivoEncaixe: String 
    - observacoes: String 
    - status: StatusAgendamentoEnum 
    - motivoCancelamento: String 
    - dataCancelamento: LocalDateTime 
    -- 
    {field} Refer√™ncias a outros microsservi√ßos: 
    - pacienteCpf: String {FK} 
    - medicoCrm: String {FK} 
    - convenioNome: String {FK} 
    - usuarioCriadorLogin: String {FK} 
    - usuarioCanceladorLogin: String {FK}
    - usuarioIniciouServicoLogin: String {FK}
    - usuarioFinalizouServicoLogin: String {FK}
} 
 
' Classe Consulta 
class Consulta { 
    - especialidade: String 
    - tipoConsulta: TipoConsultaEnum 
} 
 
' Classe Exame 
class Exame { 
    - nomeExame: String 
    - requerPreparo: Boolean 
    - instrucoesPreparo: String 
} 
 
' Classe Procedimento 
class Procedimento { 
    - descricaoProcedimento: String 
    - salaEquipamentoNecessario: String 
    - nivelRisco: String 
} 
 
' Classe BloqueioAgenda (independente) 
class BloqueioAgenda { 
    - id: String {PK} 
    - dataInicio: LocalDateTime 
    - dataFim: LocalDateTime 
    - motivo: String 
    - antecedenciaMinima: Integer 
    - medicoCrm: String {FK} 
    - usuarioCriadorLogin: String {FK} 
    - dataCriacao: LocalDateTime 


    - ativo: Boolean 
} 
 
' Enums 
enum ModalidadeEnum { 
    PRESENCIAL 
    TELEMEDICINA 
} 
 
enum StatusAgendamentoEnum { 
    ATIVO 
    CANCELADO 
    REALIZADO 
} 
 
enum TipoConsultaEnum { 
    PRIMEIRA_VEZ 
    RETORNO 
    URGENCIA 
} 
 
' Relacionamentos de heran√ßa 
Agendamento <|-- Consulta 
Agendamento <|-- Exame 
Agendamento <|-- Procedimento 
 
' Relacionamentos com Enums 
Agendamento --> ModalidadeEnum : modalidade 
Agendamento --> StatusAgendamentoEnum : status 
Consulta --> TipoConsultaEnum : tipoConsulta 
 
note right of Agendamento 
    Classe abstrata base 
    @Document (MongoDB) 
    Collection: agendamento 
     
    Armazena refer√™ncias string 
    para entidades de outros 
    microsservi√ßos (CPF, CRM, Login) 
end note 
 
note right of BloqueioAgenda 
    Entidade independente 
    @Document (MongoDB) 
    Collection: bloqueio_agenda 
     
    Controla per√≠odos bloqueados 
    na agenda dos m√©dicos 


end note 
 
note bottom of Consulta 
    Collection: consulta 
    Especializa√ß√£o para consultas m√©dicas 
end note 
 
note bottom of Exame 
    Collection: exame 
    Especializa√ß√£o para exames 
end note 
 
note bottom of Procedimento 
    Collection: procedimento 
    Especializa√ß√£o para procedimentos 
end note

@enduml
```

---

## 2. M√≥dulo de Cadastro

### 2.1. Diagrama de Classes - Cadastro

![image_page4_1.png](images/image_page4_1.png)

### 2.2. C√≥digo UML

```plantuml
@startuml Diagrama de Classes - Microsservi√ßo Cadastro

title Diagrama de Classes - SimpleHealth Cadastro (PostgreSQL)

' Configura√ß√µes de estilo
skinparam classAttributeIconSize 0

skinparam class {
    BackgroundColor<<abstract>> LightYellow
    BorderColor Black
    ArrowColor Black
}

' Classe abstrata Pessoa
abstract class Pessoa <<abstract>> {
    - id: Long {PK}
    - nomeCompleto: String
    - telefone: String
    - email: String
}

' Classe Usuario
class Usuario {
    - id: Long {PK}
    - login: String {unique}
    - senha: String
    - perfil: EPerfilUsuario
    --
    + temPermissaoEncaixe(): boolean
}

' Classe Paciente
class Paciente {
    - id: Long {PK} 
    - dataNascimento: LocalDate 
    - cpf: String {unique} 
    -- 
    + verificarExistencia(): boolean 
} 
 
' Classe Medico 
class Medico { 
    - id: Long {PK} 
    - crm: String {unique} 
    - especialidade: String 
} 
 
' Classe Convenio (independente) 
class Convenio { 
    - id: Long {PK} 
    - nome: String 
    - plano: String 
    - ativo: Boolean 
} 
 


' Enum EPerfilUsuario 
enum EPerfilUsuario { 
    MEDICO 
    SECRETARIA 
    ADMIN 
    PACIENTE 
    FINANCEIRO 
    TESOURARIA 
} 
 
' Relacionamentos de heran√ßa 
Pessoa <|-- Usuario 
Pessoa <|-- Paciente 
Pessoa <|-- Medico 
 
' Relacionamentos de composi√ß√£o/associa√ß√£o 
Usuario --> EPerfilUsuario : perfil 
 
note right of Pessoa 
    Classe abstrata base 
    @MappedSuperclass 
    Banco: PostgreSQL 
end note 
 
note right of Convenio 
    Entidade independente 
    Representa planos de sa√∫de 
end note 
 
note bottom of Usuario 
    Representa usu√°rios do sistema 
    com diferentes perfis de acesso 
end note

@enduml
```

---

## 3. M√≥dulo de Estoque

### 3.1. Diagrama de Classes - Estoque

![image_page6_1.png](images/image_page6_1.png)

### 3.2. C√≥digo UML

```plantuml
@startuml Diagrama de Classes - Microsservi√ßo Estoque 
 
title Diagrama de Classes - SimpleHealth Estoque 
 
' Configura√ß√µes de estilo 
skinparam classAttributeIconSize 0 
skinparam class { 
    BackgroundColor<<abstract>> LightYellow 
    BorderColor Black 
    ArrowColor Black 
} 
 
' Classe base Item 
class Item { 
    - idItem: Long {PK} 
    - nome: String 
    - quantidadeTotal: Integer 
    - validade: Date 
} 
 
' Classes especializadas de Item 
class Medicamento { 
    - presciricao: String 
    - targa: String 
} 
 
class Hospitalar { 
    - descartabilidade: Boolean 
} 
 
class Alimento { 
    - alergenicos: String 
} 
 
' Classe Estoque 
class Estoque { 
    - idEstoque: Long {PK} 
    - local: String 
} 
 
' Classe Fornecedor 
class Fornecedor { 
    - idFornecedor: Long {PK} 
    - cnpj: String 
} 
 


' Classe Pedido 
class Pedido { 
    - idPedido: Long {PK} 
    - dataPedido: Date 
    - status: String 
} 
 
' Classe ProcedimentoItem 
class ProcedimentoItem { 
    - id: Long {PK} 
    - quantidadeNecessaria: BigDecimal 
} 
 
\' Relacionamentos de heran√ßa 
Item <|-- Medicamento 
Item <|-- Hospitalar 
Item <|-- Alimento 
 
\' Relacionamentos de composi√ß√£o/associa√ß√£o 
\' NOTA: Relacionamento Item-Estoque n√£o implementado no Cassandra (ver Discrep√¢ncia 1.7)
\' MVP opera com estoque √∫nico impl√≠cito - design NoSQL sem joins
Pedido "1" *-- "*" Item : cont√©m > 
Pedido "*" --> "1" Fornecedor : fornecido por > 
ProcedimentoItem "*" --> "1" Item : referencia > 
 
note right of Item
    Classe base para itens do estoque 
    Representa qualquer item armazen√°vel 
end note 
 
note right of Medicamento 
    Especializa√ß√£o: Medicamentos 
    Atributos espec√≠ficos: 
    - presciricao (receitu√°rio) 
    - targa (classifica√ß√£o) 
end note 
 
note right of Hospitalar 
    Especializa√ß√£o: Itens Hospitalares 
    Ex: luvas, seringas, m√°scaras 
    - descartabilidade indica se √© 
      descart√°vel ou reutiliz√°vel 
end note 
 
note right of Alimento 
    Especializa√ß√£o: Alimentos 
    - alergenicos: lista de 
      poss√≠veis al√©rgenos 
end note 


 
note right of Estoque 
    Representa locais f√≠sicos 
    de armazenamento 
    Ex: Farm√°cia, Almoxarifado, 
    Nutri√ß√£o 
end note 
 
note right of Fornecedor 
    Representa fornecedores 
    de itens do estoque 
end note 
 
note right of Pedido 
    Representa pedidos de compra 
    com m√∫ltiplos itens 
end note 
 
note right of ProcedimentoItem 
    Relaciona itens necess√°rios 
    para realizar procedimentos 
    m√©dicos espec√≠ficos 
end note

@enduml
```
