# Diagrama Global de Casos de Uso

## Sumﾃ｡rio

- [Notas Tﾃｩcnicas - Correﾃｧﾃｵes de Discrepﾃ｢ncias](#notas-tﾃｩcnicas---correﾃｧﾃｵes-de-discrepﾃ｢ncias)
- [Visﾃ｣o Geral](#visﾃ｣o-geral)
- [Atores do Sistema](#atores-do-sistema)
- [Mﾃｳdulos e Casos de Uso](#mﾃｳdulos-e-casos-de-uso)
  - [Cadastro e Administraﾃｧﾃ｣o](#cadastro-e-administraﾃｧﾃ｣o)
  - [Gestﾃ｣o de Agendamento](#gestﾃ｣o-de-agendamento)
  - [Estoque e Suprimentos](#estoque-e-suprimentos)
- [Cﾃｳdigo PlantUML](#cﾃｳdigo-plantuml)
- [Diagrama Visual](#diagrama-visual)

---

## Notas Tﾃｩcnicas - Correﾃｧﾃｵes de Discrepﾃ｢ncias

Este documento foi atualizado para corrigir discrepﾃ｢ncias identificadas entre a documentaﾃｧﾃ｣o e a implementaﾃｧﾃ｣o real do sistema.

### Discrepﾃ｢ncia 5.1: UC07 - Gerar Alerta de Estoque Crﾃｭtico

**Discrepﾃ｢ncia:** UC07 estava documentado como funcionalidade completa, mas nﾃ｣o estﾃ｡ implementado (0% funcional). Publisher existe em Cadastro, mas nﾃ｣o hﾃ｡ subscriber no mﾃｳdulo Estoque.

**Mudanﾃｧa Feita:** UC07 marcado como `[REDUﾃﾃグ DE ESCOPO - Nﾃグ IMPLEMENTADO]` com cor cinza (#LightGray) no diagrama PlantUML.

**Justificativa:** Funcionalidade foi planejada mas nﾃ｣o desenvolvida. Sistema sempre retorna lista vazia apﾃｳs timeout de 5 segundos.

**Documento Detalhado:** [塘 CORRECAO_DISCREPANCIA_5.1.md](../../../Correﾃｧﾃｵes%20de%20Alinhamento/CORRECAO_DISCREPANCIA_5.1.md)

### Discrepﾃ｢ncia 5.2: UC08 - Consultar Histﾃｳrico do Paciente

**Discrepﾃ｢ncia:** UC08 documentado com integraﾃｧﾃ｣o completa de 5 mﾃｳdulos, mas apenas 3 de 5 canais Redis Pub/Sub funcionam (60% funcional).

**Mudanﾃｧa Feita:** UC08 marcado como `[IMPLEMENTAﾃﾃグ PARCIAL]` com cor amarela (#LightYellow) no diagrama. Funciona para consultas, exames e procedimentos. Nﾃ｣o funciona para estoque e pagamentos.

**Justificativa:** AgendamentoSubscriber responde 3 canais, mas EstoqueSubscriber nﾃ｣o existe e Mﾃｳdulo Financeiro nﾃ｣o foi implementado.

**Documento Detalhado:** [塘 CORRECAO_DISCREPANCIA_5.2.md](../../../Correﾃｧﾃｵes%20de%20Alinhamento/CORRECAO_DISCREPANCIA_5.2.md)

### Discrepﾃ｢ncia 5.3: UC10 - Controlar Validade de Itens

**Discrepﾃ｢ncia:** UC10 documentado com persistﾃｪncia completa de descartes, mas movimentaﾃｧﾃｵes nﾃ｣o sﾃ｣o salvas em banco de dados (50% funcional).

**Mudanﾃｧa Feita:** UC10 marcado como `[IMPLEMENTAﾃﾃグ PARCIAL]` com cor amarela (#LightYellow). Consulta por validade funciona via endpoint REST, mas descarte apenas imprime logs no console.

**Justificativa:** ControlarValidadeUseCase existe, mas mﾃｩtodo `registrarMovimentacaoDescarte()` nﾃ｣o persiste dados. Sem integraﾃｧﾃ｣o com Mﾃｳdulo Financeiro.

**Documento Detalhado:** [塘 CORRECAO_DISCREPANCIA_5.3.md](../../../Correﾃｧﾃｵes%20de%20Alinhamento/CORRECAO_DISCREPANCIA_5.3.md)

---

Para consultar todas as correﾃｧﾃｵes de discrepﾃ｢ncias do projeto, acesse o [淘 Sumﾃ｡rio de Correﾃｧﾃｵes](../../../Correﾃｧﾃｵes%20de%20Alinhamento/SUMARIO_CORRECAO_DISCREPANCIA.md).

---

## Visﾃ｣o Geral

Este diagrama apresenta a estrutura global dos casos de uso do sistema Simple Health, organizado em trﾃｪs mﾃｳdulos principais que cobrem as necessidades de cadastro, agendamento e controle de estoque.

## Atores do Sistema

### Hierarquia de Atores

**Administrativo** (ator abstrato)
- Secretﾃ｡ria
- Gestor

**Profissional de Saﾃｺde** (ator abstrato)
- Mﾃｩdico

**Sistema** (ator automatizado)

## Mﾃｳdulos e Casos de Uso

### Cadastro e Administraﾃｧﾃ｣o

- **UC01**: Cadastrar Novo Paciente
- **UC08**: Consultar Histﾃｳrico do Paciente **[REDUﾃﾃグ DE ESCOPO - IMPLEMENTAﾃﾃグ PARCIAL]**

### Gestﾃ｣o de Agendamento

- **UC02**: Agendar Consulta
- **UC03**: Solicitar Encaixe *(extends UC02)*
- **UC04**: Registrar Bloqueio de Agenda
- **UC09**: Cancelar Agendamento

### Estoque e Suprimentos

- **UC05**: Dar Baixa em Insumos
- **UC06**: Processar Entrada de NF/Itens
- **UC07**: Gerar Alerta de Estoque Crﾃｭtico **[REDUﾃﾃグ DE ESCOPO - Nﾃグ IMPLEMENTADO]**
- **UC10**: Controlar Validade de Itens **[REDUﾃﾃグ DE ESCOPO - IMPLEMENTAﾃﾃグ PARCIAL]**

---

## Cﾃｳdigo PlantUML

```plantuml
@startuml
left to right direction

' --- ATORES ---
actor "Administrativo" as Admin_Abstract
actor "Secretﾃ｡ria" as Sec
actor "Gestor" as Ges

actor "Profissional de Saﾃｺde" as Profissional_Abstract
actor "Mﾃｩdico" as Med

actor "Sistema" as Sys

' --- HIERARQUIA DE HERANﾃ② ---
' Nﾃｭvel 1: Administrativo (Base para controle e gerenciamento)
Admin_Abstract <|-- Sec
Admin_Abstract <|-- Ges

' Nﾃｭvel 2: Profissional de Saﾃｺde (Base para quem presta serviﾃｧo)
Profissional_Abstract <|-- Med

' ===============================================
' SUBSISTEMAS
' ===============================================
package "1. Cadastro e Administraﾃｧﾃ｣o" {
  usecase "Cadastrar Novo Paciente" as UC1
  usecase "Consultar Histﾃｳrico do Paciente\n[IMPLEMENTAﾃﾃグ PARCIAL]" as UC8 #LightYellow
  usecase "Gerar Alerta de Estoque Crﾃｭtico\n[REDUﾃﾃグ DE ESCOPO]" as UC7 #LightGray
}

package "2. Gestﾃ｣o de Agendamento" {
  usecase "Agendar Consulta" as UC2
  usecase "Solicitar Encaixe" as UC3
  usecase "Registrar Bloqueio de Agenda" as UC4
  usecase "Cancelar Agendamento" as UC9
}

package "3. Estoque e Suprimentos" {
  usecase "Dar Baixa em Insumos" as UC5
  usecase "Processar Entrada de NF/Itens" as UC6
  usecase "Controlar Validade de Itens" as UC10 #LightYellow
}

' ===============================================
' RELAﾃﾃ髭S COM ATORES ABSTRATOS
' ===============================================

' --- Administrativo (Cadastro, Finanﾃｧas, Controle) ---
Admin_Abstract --> UC1 : Cadastro (Registro de Paciente)
Admin_Abstract --> UC6 : Controle de Suprimentos (NF/Itens)
Admin_Abstract --> UC10 : Controle de Qualidade/Validade
Admin_Abstract --> UC9 : Gerenciamento de Fluxo

' --- Profissional de Saﾃｺde (Clﾃｭnico e Agendamento Flexﾃｭvel) ---
Profissional_Abstract --> UC5 : Consumo Clﾃｭnico
Profissional_Abstract --> UC3 : Flexibilizaﾃｧﾃ｣o de Agenda
Profissional_Abstract --> UC8 : Consulta Clﾃｭnica

' ===============================================
' RELAﾃﾃ髭S ESPECﾃ孝ICAS
' ===============================================

' Secretﾃ｡ria (Aﾃｧﾃｵes de Agendamento Primﾃ｡rio)
Sec --> UC2

' Mﾃｩdico (Aﾃｧﾃｵes de Bloqueio de Agenda)
Med --> UC4

' Gestor (Aﾃｧﾃｵes de Controle de Agenda)
Ges --> UC4

' Sistema (Tarefas automﾃ｡ticas)
Sys --> UC7
Sys --> UC10 : <<inclui>> (Verificaﾃｧﾃ｣o)


' ===============================================
' RELAﾃﾃ髭S ENTRE CASOS DE USO
' ===============================================
UC3 ..> UC2 : <<extends>>
UC5 ..> UC10 : <<uses>>
UC7 ..> UC6 : <<uses>>
@enduml
```

## Diagrama Visual

![Diagrama Global de Casos de Uso](images/image1.png)
